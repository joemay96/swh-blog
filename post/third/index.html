<!doctype html><html lang=de-de><head><meta charset=utf-8><meta name=viewport content="width=device-width"><script type=application/javascript src=https://joemay96.github.io/swh-blog/js/theme-mode.js></script>
<link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/frameworks.min.css><link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/github.min.css><link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/github-style.css><link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/light.css><link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/dark.css><link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/syntax.css><title>Microcontroller Lab - Josef SWH Blog</title><link rel=icon type=image/x-icon href=./images/favicon.png><meta name=theme-color content="#1e2327"><meta name=description content="Das Microcontroller Labor ging 2 Vorlesungen lang. In den zwei Microcontroller Labs haben wir erste Erfahrungen mit Microcontrollern sammeln können. Dabei Konnten wir verschiedene Microcontroller wie den Arduino Uno, aber auch z.B. den Arduino Mega ausprobieren können."><meta name=keywords content="sketching with hardware,swh,blog,uni"><meta name=robots content="noodp"><link rel=canonical href=https://joemay96.github.io/swh-blog/post/third/><meta name=twitter:card content="summary"><meta name=twitter:title content="Microcontroller Lab - Josef SWH Blog"><meta name=twitter:description content="Das Microcontroller Labor ging 2 Vorlesungen lang. In den zwei Microcontroller Labs haben wir erste Erfahrungen mit Microcontrollern sammeln können. Dabei Konnten wir verschiedene Microcontroller wie den Arduino Uno, aber auch z.B. den Arduino Mega ausprobieren können."><meta name=twitter:site content="https://joemay96.github.io/swh-blog/"><meta name=twitter:creator content><meta name=twitter:image content="https://joemay96.github.io/swh-blog/"><meta property="og:type" content="article"><meta property="og:title" content="Microcontroller Lab - Josef SWH Blog"><meta property="og:description" content="Das Microcontroller Labor ging 2 Vorlesungen lang. In den zwei Microcontroller Labs haben wir erste Erfahrungen mit Microcontrollern sammeln können. Dabei Konnten wir verschiedene Microcontroller wie den Arduino Uno, aber auch z.B. den Arduino Mega ausprobieren können."><meta property="og:url" content="https://joemay96.github.io/swh-blog/post/third/"><meta property="og:site_name" content="Microcontroller Lab"><meta property="og:image" content="https://joemay96.github.io/swh-blog/"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-12-05 15:05:13 +0200 +0200"></head><body><div style=position:relative><header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on"><div class="Header-item mobile-none" style=margin-top:-4px;margin-bottom:-4px><a class=Header-link href=https://joemay96.github.io/swh-blog/><svg class="octicon" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class="Header-item d-md-none"><button class="Header-link btn-link js-details-target" type=button onclick='document.querySelector("#header-search").style.display=document.querySelector("#header-search").style.display=="none"?"block":"none"'><svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button></div><div style=display:none id=header-search class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex"><div class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"><div class=position-relative><form target=_blank action=https://www.google.com/search accept-charset=utf-8 method=get autocomplete=off><label class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center"><input type=text class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" name=q placeholder=Search autocomplete=off>
<input type=hidden name=q value=site:https://joemay96.github.io/swh-blog/></label></form></div></div></div><div class="Header-item Header-item--full flex-justify-center d-md-none position-relative"><a class=Header-link href=https://joemay96.github.io/swh-blog/><svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div><div class=Header-item style=margin-right:0><a href=javascript:void(0) class="Header-link no-select" onclick=switchTheme()><svg style="fill:var(--color-profile-color-modes-toggle-moon)" class="no-select" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.52208 7.71754c3.05612.0 5.53362-2.47748 5.53362-5.5336C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961 9.95801 1.07727 10.3495.771159 10.6474.99992c1.4679 1.12724 2.4141 2.90007 2.4141 4.89391.0 3.40575-2.7609 6.16667-6.16665 6.16667-2.94151.0-5.40199-2.0595-6.018122-4.81523C.794841 6.87902 1.23668 6.65289 1.55321 6.85451 2.41106 7.40095 3.4296 7.71754 4.52208 7.71754z"/></svg></a></div></header></div><div><main><div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4"><div class=px-0><div class="mb-3 d-flex px-3 px-md-3 px-lg-5"><div class="flex-auto min-width-0 width-fit mr-3"><div class=d-flex><div class="d-none d-md-block"><a class="avatar mr-2 flex-shrink-0" href=https://joemay96.github.io/swh-blog/><img class=avatar-user src=https://joemay96.github.io/swh-blog/images/avatar.gif width=32 height=32></a></div><div class="d-flex flex-column"><h1 class="break-word f3 text-normal mb-md-0 mb-1"><span class=author><a href=https://joemay96.github.io/swh-blog/>Josef</a></span><span class=path-divider>/</span><strong class="css-truncate-target mr-1" style=max-width:410px><a href=https://joemay96.github.io/swh-blog/post/third/>Microcontroller Lab</a></strong></h1><div class="note m-0">Created <relative-time datetime="Mon, 05 Dec 2022 15:05:13 +0200" class=no-wrap>Mon, 05 Dec 2022 15:05:13 +0200</relative-time>
<span class=file-info-divider></span>
Modified <relative-time datetime="Tue, 06 Dec 2022 20:10:31 +0000" class=no-wrap>Tue, 06 Dec 2022 20:10:31 +0000</relative-time></div></div></div></div></div></div></div><div class="container-lg px-3 new-discussion-timeline"><div class="repository-content gist-content"><div><div class="js-gist-file-update-container js-task-list-container file-box"><div id=file-pytest class="file my-2"><div id=post-header class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style=z-index:2><div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto"><div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0"><summary id=toc-toggle onclick=clickToc() class="btn btn-octicon m-0 mr-2 p-2"><svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered"><path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zm0 5a.75.75.0 000 1.5h8.5a.75.75.0 000-1.5h-8.5zM3 8A1 1 0 111 8a1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"/></svg></summary><details-menu class=SelectMenu id=toc-details style="display: none;"><div class="SelectMenu-modal rounded-3 mt-1" style=max-height:340px><div class="SelectMenu-list SelectMenu-list--borderless p-2" style=overscroll-behavior:contain id=toc-list></div></div></details-menu>2059 Words</div><div class="file-actions flex-order-2 pt-0"></div></div></div><div class="Box-body px-5 pb-5" style=z-index:1><article class="markdown-body entry-content container-lg"><h1 id=das-microcontroller-lab>Das Microcontroller Lab</h1><p>In den zwei Microcontroller Labs haben wir erste Erfahrungen mit Microcontrollern sammeln können. Dabei Konnten wir verschiedene Microcontroller wie den Arduino Uno, aber auch z.B. den Arduino Mega ausprobieren können.</p><h2 id=tag-1>Tag 1</h2><p>Zu aller erst haben wir einen kleinen Einblick in die Maker Community bekommen und welche interessanten Projekte durch Microcontroller umgesetzt werden können. Erstaunlich finde ich immernoch, dass es für so ziemlich jeden Anwendungsfall bereits Komponenten gibt, welche man kaufen und verwenden kann und diese nicht entwickeln muss.</p><p>Wir haben uns zuerst mit dem Arduino Uno vertraut gemacht</p><p><div class=img-container><img class=img src=/swh-blog/images/3/1_hub8d9331a5fc7ffaf7df1c8ca116e3843_7619952_580x0_resize_box_3.png alt=1.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>und verstanden welche Pins grundlegend wofür verwendet werden. Später bei der Anwendung verschiedener Bauteile hat sich ergeben wofür alle weiteren Pins verwendet werden.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=c1>// the setup function runs once when you press reset or power the board
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// initialize digital pin LED_BUILTIN as an output.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>pinMode</span><span class=p>(</span><span class=kc>LED_BUILTIN</span><span class=p>,</span> <span class=kc>OUTPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// the loop function runs over and over again forever
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>digitalWrite</span><span class=p>(</span><span class=kc>LED_BUILTIN</span><span class=p>,</span> <span class=kc>HIGH</span><span class=p>);</span>  <span class=c1>// turn the LED on (HIGH is the voltage level)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>                      <span class=c1>// wait for a second
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>digitalWrite</span><span class=p>(</span><span class=kc>LED_BUILTIN</span><span class=p>,</span> <span class=kc>LOW</span><span class=p>);</span>   <span class=c1>// turn the LED off by making the voltage LOW
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>                      <span class=c1>// wait for a second
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>Die erste Aufgabe nachdem wir den Arduino an unseren Laptops eingerichtet hatten bestand darin eine LED durch den Arduino zum blicken zu bringen.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/3_hu759b2d1f47bd837351331ddcfa517b85_6626206_580x0_resize_box_3.png alt=3.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p><div class=img-container><img class=img src=/swh-blog/images/3/4_hubcb0b1c5cdf89a1ab91f21646967c2d7_7034353_580x0_resize_box_3.png alt=4.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>Dafür haben wir die Standard Eingaben verwendet.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=kt>int</span> <span class=n>led_pin</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span><span class=p>(</span><span class=n>led_pin</span><span class=p>,</span> <span class=kc>OUTPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>digitalWrite</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=kc>HIGH</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>delay</span><span class=p>(</span><span class=mi>2000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>digitalWrite</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=kc>LOW</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>delay</span><span class=p>(</span><span class=mi>2000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Zum einen gibt es bei jedem Arduino Programm eine setup() Phase in welcher Pins und Einstellungen vorgenommen werden können und weiter eine loop() welche das Programm abbildet, welches sich permanent wiederholt.</p><p>Am ersten Tag habe ich mich noch mit mit einem <strong>Potentiometer</strong> beschäftigt. Es handelt sich dabei um einen dynamisch einstellbaren Widerstand und dieses habe ich dazu verwendet die Helligkeit der LED zu regeln, indem ich das Potentiometer hoch oder runter geregelt habe.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/11_hu4e1d08f5c022e2d0e4580d91aa4f0c7e_6669069_580x0_resize_box_3.png alt=11.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=kt>int</span> <span class=n>led_pin</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>read_value</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>led_value</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span><span class=p>(</span><span class=n>led_pin</span><span class=p>,</span> <span class=kc>OUTPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>read_value</span> <span class=o>=</span> <span class=nf>analogRead</span><span class=p>(</span><span class=n>A1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>led_value</span> <span class=o>=</span> <span class=nf>map</span><span class=p>(</span><span class=n>read_value</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1024</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>analogWrite</span><span class=p>(</span><span class=n>led_pin</span><span class=p>,</span> <span class=n>led_value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Als nächstes wollte ich mich mit einigen Sensoren vertraut machen, welche ich für die Wetterstation benötige.</p><p>Angefangen habe ich mit einem Luftfeuchtigkeitssensor, auch wenn ich anfangs ein paar Startschwierigkeiten hatte, da die Auslesung der Werte nicht so gut funktioniert hat, da ich zum Teil Widerstände vergessen habe einzubauen.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/12_huda93541b5644f16c308b0d96323ad132_6848903_580x0_resize_box_3.png alt=12.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=c1>//Benötigte Libraries
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;Wire.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>//Deklarieren der benötigten Variablen
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#define adress 0x4F
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Starten der Sensor Verbindung
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Wire</span><span class=p>.</span><span class=nf>begin</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Ausführen der unten deklarierten Funktion
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kt>int</span> <span class=n>c1</span> <span class=o>=</span> <span class=n>read_temp</span><span class=p>(</span><span class=n>adress</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Ausgabe des ermittelten Sensorwertes
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Sensor: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=n>c1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Pause
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>read_temp</span><span class=p>(</span><span class=kt>int</span> <span class=n>address</span><span class=p>){</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Start der Übertragung mit dem Sensor
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Wire</span><span class=p>.</span><span class=nf>beginTransmission</span><span class=p>(</span><span class=n>address</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Senden eines Bits zum erhalt der Informationen
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Wire</span><span class=p>.</span><span class=nf>write</span><span class=p>(</span><span class=mh>0x00</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Anfrage 1 Bytes des Sensors
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Wire</span><span class=p>.</span><span class=nf>requestFrom</span><span class=p>(</span><span class=n>address</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//Warten auf eine Antwort
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nc>Wire</span><span class=p>.</span><span class=nf>available</span><span class=p>()</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Speichern und Rückgabe des Wertes
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=nc>Wire</span><span class=p>.</span><span class=nf>read</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Beende Übertragung
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nc>Wire</span><span class=p>.</span><span class=nf>endTransmission</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Beende Übertragung
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nc>Wire</span><span class=p>.</span><span class=nf>endTransmission</span><span class=p>();</span>
</span></span><span class=line><span class=cl>   <span class=err> </span><span class=k>return</span><span class=err> </span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=err>  </span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Weiter habe ich einen Temperatursensor angeschlossen (dieser kann mit dem I2C Protokoll betrieben werden). Die Werte dieses Bauteils liesen sich ohne weitere Probleme auslesen.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/16_hu371954867c556a6e6402d1ab5ce7bd87_7542783_c73fdff3fe663a370399dde23cc775c0.png alt=16.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=kt>int</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinA</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinB</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinC</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0Pos</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinALast</span> <span class=o>=</span> <span class=kc>LOW</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=kc>LOW</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinA</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinB</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinC</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span> <span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>n</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinA</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>((</span><span class=n>encoder0PinALast</span> <span class=o>==</span> <span class=kc>LOW</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=kc>HIGH</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinB</span><span class=p>)</span> <span class=o>==</span> <span class=kc>LOW</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>encoder0Pos</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>encoder0Pos</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;Encoder: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=n>encoder0Pos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;, &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>button</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinC</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;Button pressed: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=n>button</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span> <span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>encoder0PinALast</span><span class=err> </span><span class=o>=</span><span class=err> </span><span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Zu guter Letzt benötige ich noch einen Sensor um die Windgeschwindigkeit zu messen. Dies kann ich durch die Verwendung eines Rotationssensors bewerkstelligen, für welchen ich noch eine geeignete Konstruktion benötige, damit der Rotationssenor durch den Wind gedreht wird und die Wetterstation die Windgeschwindigkeit messen kann.</p><p>Auch die Ansteuerung des Rotationssensors verlief reibungslos. Interessanter Weise besitzt der Rotationssensor noch einen Knopf.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/21_hucbab1a716ae8d65e57746e3f402b6057_6185861_580x0_resize_box_3.png alt=21.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=kt>int</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinA</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinB</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinC</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0Pos</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>encoder0PinALast</span> <span class=o>=</span> <span class=kc>LOW</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=kc>LOW</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinA</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinB</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>pinMode</span> <span class=p>(</span><span class=n>encoder0PinC</span><span class=p>,</span><span class=kc>INPUT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span> <span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// encoder0Pos zeigt in welche Richtung der Rotationssensor sich bewegt und man 
</span></span></span><span class=line><span class=cl><span class=c1>// kann feststellen, wann er eine vollständige Rotation durchgeführt hat
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>loop</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>n</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinA</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>((</span><span class=n>encoder0PinALast</span> <span class=o>==</span> <span class=kc>LOW</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=kc>HIGH</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinB</span><span class=p>)</span> <span class=o>==</span> <span class=kc>LOW</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>encoder0Pos</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>encoder0Pos</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;Encoder: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=n>encoder0Pos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;, &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>button</span> <span class=o>=</span> <span class=nf>digitalRead</span><span class=p>(</span><span class=n>encoder0PinC</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=s>&#34;Button pressed: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span> <span class=p>(</span><span class=n>button</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span> <span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>encoder0PinALast</span><span class=err> </span><span class=o>=</span><span class=err> </span><span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=tag-2>Tag 2</h2><p>Am zweiten Tag habe ich beschlossen, dass die Wetterstation ihre Daten per WLAN eine Datenbank senden könnte und diese ohne zu viel Aufwand online verfübar sein könnten. Daher habe ich mich mit den Wfi Modulen z.B. dem Wemos D1 Mini vertraut gemacht. Eigentlich hätte die Einrichtung relativ einfach sein sollen, nur leider hat das gesamte Prozedere nicht so funktioniert wie ich es mir vorgestellt habe. Nachdem ich das Modul angeschlossen habe und mich auch versichert habe, dass das Modul korrekt eingesteckt ist hat mein Laptop den Arduino leider nicht erkannt. Nach viel debugging hat sich herausgestellt, dass das Problem weder am Arduino noch an den Wifi Modulen gelegen hat. Leider hat mein Laptop die Treiber für besagten Arduino mit integiertem Wifi (Lolin wemos r2) nicht verwenden können, auch wenn laut diverser Quellen diese benötigten Treiber bereits im Linux Kernel integiert sein sollen. Nach weiterem herumprobieren habe ich probiert nur den verwendeten Arduino anzuschließen und auch das hat nicht funktioniert.</p><p>Es war nun also klar, dass die Problemtik nicht umbedingt an den Wifi Modulen lag sondern am Chipsatz des Arduino. Nachdem ich auf einen Arduino Uno umgestiegen bin, welcher einen aufgesteckten Microcontroller hat und dieser nicht als Chip festgelötet ist (ich nehme an, es handelt sich um ein neueres Modell) hat alles weitere reibungslos funktioniert, da dieser Arduino andere Treiber verwendet.</p><p>Da ich mich aber dem neueren Modell mit integiertem Wifi nicht geschlagen geben wollte habe ich probiert diesen an meinem Windows Rechner zum laufen zu bringen. Dies funktionierte reibungslos und war Kinderleicht.</p><p>Mein zweiter Tag hat sich somit als nicht sonderlich effizient herausgestellt, wenn man ihn anhand verwendeter Sensoren betrachtet. Für mich war der gesamte Tag allerdings durchaus lehrreich. Ich habe viel über die verschiedenen Wifi Module, über die verschiedenen Chipsätze und Treiber, welche zum Betreiben der Arduinos verwendet wird, gelernt.</p><h3 id=displays>Displays</h3><p>Weiter möchte ich aber auch ein Display für meine Wetterstation verwenden, damit direkt (und nicht nur über eine online Plattform) die Werte ausgelesen werden können. Ebenfalls möchte ich mich gerne mit Displays beschäftigen, da diese für viele Projekte verwendet werden.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/7_hu4c6a1b8660ddcbead01f6e8247a6f290_4946983_580x0_resize_box_3.png alt=7.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>Ich habe mich für ein kleines 1.3” Oled Display entschieden, da es sich zum einen herausgestellt hat, dass ich keine Spannungsregler verwenden muss, wie das bei anderen Displays der Fall ist und zum anderen finde ich es passend ein kleines, funktioniales Display für eine kleine, funktioniale Wetterstation zu verwenden 😃</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;U8glib.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=n>U8GLIB_SH1106_128X64</span> <span class=nf>u8g</span><span class=p>(</span><span class=n>U8G_I2C_OPT_NONE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>draw</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont12</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Hallooooo :D&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>25</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;OLED i2c Display&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>40</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Hello from another world!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>draw2</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont12</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Another Site&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>25</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Check this out!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>40</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;This is a very long text&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>firstPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>do</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>draw</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>u8g</span><span class=p>.</span><span class=n>nextPage</span><span class=p>()</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>delay</span><span class=p>(</span><span class=mi>3500</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>firstPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>do</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>draw2</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>u8g</span><span class=p>.</span><span class=n>nextPage</span><span class=p>());</span>
</span></span><span class=line><span class=cl>  <span class=nf>delay</span><span class=p>(</span><span class=mi>3500</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Der Code für das Display war einigermaßen straightforward. Interessant finde ich daran, dass der Inhalt der auf das Display geschrieben wird in einer Schleife ist um ständig refreshed zu werden. Dies ist im nachhinein logisch, war am Anfang für mich aber eine echte Erkenntnis.</p><p>Des weiteren hat sich das Display angeboten, da dieses mit dem seriellen I2C Protokoll betrieben wird und ich dadurch Möglichkeit hatte das I2C Protokoll auszuprobieren.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/6_hu84b5826efc9b0277a91541ed2ef87ad0_6964947_580x0_resize_box_3.png alt=6.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>Wie man auf diesem Bild sieht habe ich den Text von ersten Display (rechtes Display) and das zweite Display weitergeleitet. Normalerweise wird I2C dafür verwendet um mehrere Geräte an einem Strang per ID ansprechen zu können. Dies ist zum Beispiel sinnvoll, wenn eine LED Kette angeschlossen wird und man jede LED einzeln ansteuern möchte, aber nicht für jede LED einen Pin am Arduino belegen möchte. Es muss dann die gesamte LED Kette (oder anderes I2C Gerät) nur an die Stromversorgung und an die SDA (Arduino Pin A4) und SCL (Arduino Pin A5) angeschlossen werden.</p><p>Leider konnte ich das I2C Protokoll codetechnisch nicht voll ausreitzen, da jedes Display nicht seine eigene ID besitzt. Es war somit nur möglich den gleichen Inhalt auf beiden Displays zu zeigen, allerdings nicht verschiedene Inhalte und das Display somit zu erweitern. Daher habe ich mich in der restlichen Zeit noch mit Interrupts beschäftigt.</p><h3 id=interrupt>Interrupt</h3><p>Interrupts scheinen ein wichtiges Konzept auch bei Microcontrollern zu sein. Interrupts stoppen, wenn sie gefeuert werden, den aktuellen Programmablauf des Arduino um auf ein Event zu reagieren. Diese Funktionalität kann für sehr viele Anwendungen verwendet werden. Ein Beispiel, welches mir in Erinnerung geblieben ist, ist ein Arduino, welcher die meiste Zeit in einem StandBy Modus läuft und diesem durch einen Interrupt geweckt wird, falls sich ein Client per Wifi verbindet. Dieser Arduino läuft nur anhand eines Akkus und kann durch die geschickte Verwendung des StandBy Modus und des Interrupts wesentlich länger mit dem Strom haushalten, als das bei normalem Betrieb möglich wäre.</p><p>Ich habe mich dafür entschieden, da ich die Displays noch angeschlossen hatte, durch einen Interrupt die Seite auf dem Display zu wechseln. Dieser Interrupt wird der einfachheit halber durch einen Button ausgelöst. Auch wenn man diesen Aufbau ohne einen Interrupt hätte bwerkstelligen können, so ist es ebenfalls durch einen Interrupt lösbar.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/2_huaa2be114b0a900f9012fb8c8d0a63b1a_6626615_580x0_resize_box_3.png alt=2.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>Nach dem Auslösen des Interrupts durch das Betätigen des Buttons erhält man eine neue Seite.</p><p><div class=img-container><img class=img src=/swh-blog/images/3/5_hu1e882bf2af47f03183d5444c645ac7b9_7113845_580x0_resize_box_3.png alt=5.png></div><style scoped>.img-container{display:flex;width:100%;align-items:center;justify-content:center}.img{border-radius:5px}</style></p><p>Den Code für den Interrupt hatte ich mir schwerer vorgestellt, allerdings gibt es hierfür die Methode <strong>attachInterrupt()</strong> welche aufgerufen werden kann. Der Methode wird als erster Parameter der digitale Pin für einen Interrupt übergeben, als nächstes der name der Funktion, welche im Falle eines Interrupts ausgeführt werden soll und als dritter Parameter wird einer der Konstanten übergeben: <strong>LOW, CHANGE, FALLING</strong>. Hierbei geht es darum bei welchem Event der Interrupt feuern soll. <strong>LOW</strong> triggert, wenn der pin auf low steht, <strong>CHANGE</strong> respektive sobald der Pin seinen Wert ändert und <strong>FALLING</strong>, wenn der Pin von high nach low geht.</p><p>In dem Beispiel mit dem triggern des Interrupts anhand eines Buttons hat sich CHANGE als der richtige Trigger herausgestellt.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;U8glib.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#define INTERRUPT_PIN 2 </span><span class=c1>//Der Pin 2 und 3 können als interrupt Pins verwendet werden
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#define INTERRUPT_STATE CHANGE
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>bool</span> <span class=n>disable_display</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>U8GLIB_SH1106_128X64</span> <span class=nf>u8g</span><span class=p>(</span><span class=n>U8G_I2C_OPT_NONE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>draw</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont12</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;OLED i2c Display&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>25</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Hallooooo :)&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>40</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Hello from another world!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>draw2</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont12</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Check out the project&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>25</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;This is the second Page&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setPrintPos</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>40</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>u8g_font_profont10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>u8g</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;Change page with interrupt&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>setup</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// attach the interrupt to trigger the interruptfunction
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//digitalPinToInterrupt(INTERRUPT_PIN)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nf>attachInterrupt</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>interrupt_display</span><span class=p>,</span> <span class=kc>FALLING</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span><span class=p>(</span><span class=s>&#34;Started&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>loop</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>disable_display</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;0&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>u8g</span><span class=p>.</span><span class=n>firstPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>draw</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>u8g</span><span class=p>.</span><span class=n>nextPage</span><span class=p>()</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nc>Serial</span><span class=p>.</span><span class=nf>print</span><span class=p>(</span><span class=s>&#34;1&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>u8g</span><span class=p>.</span><span class=n>firstPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>draw2</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>u8g</span><span class=p>.</span><span class=n>nextPage</span><span class=p>()</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>interrupt_display</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// change state
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nc>Serial</span><span class=p>.</span><span class=nf>println</span><span class=p>(</span><span class=s>&#34;Interrupt&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>disable_display</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span> <span class=c1>//!disable_display;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>Eine Problematik, die sich beim Erzeugen des Interrupts speziell durch einen Button ergeben hat, ist das der Button durch Spannungsspitzen oder ähnliches mehrfach ausgelöst werden kann und dies den Effekt haben kann, dass mehrere Interrupts ausgelöst werden. Um dies zu verhindern müsste ein Timeout weitere Interrupts eingerichtet werden, allerdings bin ich dazu nicht mehr gekommen. Eine mögliche Lösung für das Problem habe ich allerdings <a href=https://create.arduino.cc/projecthub/rafitc/interrupts-basics-f475d5>hier</a> gefunden.</p><h3 id=weiteres-lernen>Weiteres Lernen</h3><p>Gerne hätte ich noch weitere Sensoren wie einen Licht und einen UV-Sensor angeschlossen und ausgelesen oder probiert einen CO Sensor in Betrieb zu nehmen. Außerdem hätte ich gerne mehr Zeit damit verbracht das Wifi Modul wirklich auszutesten, da mir dazu leider ein wenig die Zeit abhanden ist.</p><p>Ebenso würde ich mich, wenn ich mehr Zeit mit Microkontrollern hätte mich noch mehr mit der Thematik der seriellen Protokolle auseinander gesetzt und versucht die einzelnen Protokolle (nicht nur I2C) besser zu verstehen.</p><p>Alles in allem begeistern mich Microcontroller sehr, da sie so vielfälltig sind und ich freue mich sie in meinem Projekt benutzen und verwenden zu können.</p></article></div></div></div></div></div></div></main></div><script type=application/javascript src=https://joemay96.github.io/swh-blog/js/toc.js></script>
<link rel=stylesheet href=https://joemay96.github.io/swh-blog/css/toc.css><div class="footer container-xl width-full p-responsive"><div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light"><a aria-label=Homepage title=GitHub class="footer-octicon d-none d-lg-block mr-lg-4" href=https://joemay96.github.io/swh-blog/><svg height="24" class="octicon octicon-mark-github mt-3" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0"><li class="mr-3 mr-lg-0"><div><p>To my <a href=https://sharky.live>Website</a></p><p>To my <a href=https://github.com/joemay96>Github</a></p></div></li><li class="mr-3 mr-lg-0">Thanks a lot for the theme <a href=https://github.com/MeiK2333/github-style>github-style</a></li></ul></div><div class="d-flex flex-justify-center pb-6"><span class="f6 text-gray-light"></span></div></div></body><script type=application/javascript src=https://joemay96.github.io/swh-blog/js/github-style.js></script></html>